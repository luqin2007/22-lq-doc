一组功能的封装
![[../../../../_resources/images/Pasted image 20241110133802.png]]
# 调用方法

- 像函数一样直接调用，等价于 `run` 方法
- `run(dict)` 方法，直接调用 `_call_` 函数
- `predict(**kvarg)` 方法，使用函数传参而不是 `dict`
- `apply(list[dict])` 方法，接收一个列表，一次执行多个查询，返回结果列表
- `generate(dict)` 方法 ：返回一个 `LLResult` 对象而不是字符串，包含调用的相关信息
# LLMChain

整合请求模板和输出解析的 LLM 调用过程

![[../../../../_resources/images/Pasted image 20241110144844.png]]
# SequentialChain

![[../../../../_resources/images/Pasted image 20241110145750.png]]

- `chains`：所有请求链，按顺序依次调用
- `input_variables`：所有请求模板的参数
- `output_variables`：前面请求的输出将以此列表对应值为键组合到下一个链的输入中
# RouterChain

带有分支选择能力的 Chain，选择更相关的链

1. 初始化语言模型，创建多条目标链和默认链。这里将目标链组合成一个 dict 用于后面选择

![[../../../../_resources/images/Pasted image 20241110152352.png]]

2. 创建路由模板，创建 `LLMRouterChain` 路由链

![[../../../../_resources/images/Pasted image 20241110151851.png]]

3. 使用多路选择链 `MultiPromptChain` 将路由链、目标链和默认链整合

![[../../../../_resources/images/Pasted image 20241110152723.png]]